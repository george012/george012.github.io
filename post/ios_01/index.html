<!doctype html><html lang=cn><head><title>WMYeah</title><meta charset=utf-8><meta content="utf-8" http-equiv=encoding><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no"><meta name=theme-color content="#000084"><link rel=icon href=https://www.wmyeah.com/favicon.ico><link rel=canonical href=https://www.wmyeah.com></head><body><nav class="navbar navbar-inverse navbar-fixed-top"><div class=navbar-inner><div class=container><button type=button class="btn btn-navbar" data-toggle=collapse data-target=.nav-collapse></button>
<a class=brand href=https://www.wmyeah.com>WMYeah</a><div class="nav-collapse collapse"><ul class=nav><li><a href=/about/><span>about</span></a></li><li><a href=/posts/><span>posts</span></a></li></ul></div></div></div></nav><div id=content class=container><div class="row-fluid navmargin"><div class=page-header><h1>iOS .Framework SDK开发注意事项 - Tue, Oct 18, 2016</h1></div><p class=lead></p><p>目录：</p><ul><li><a href=#1-%E6%90%9C%E7%B4%A2-library-%E8%AE%BE%E7%BD%AE%E5%B7%A5%E7%A8%8B%E6%A8%A1%E5%BC%8F%E4%B8%BA--static-library>1. 搜索 Library 设置工程模式为 Static Library</a></li><li><a href=#2-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9>2. 注意事项:</a></li><li><a href=#3-run-sripte-%E5%86%85%E5%AE%B9%E5%A6%82%E4%B8%8B>3. Run Sripte 内容如下</a></li><li><a href=#4-%E8%84%9A%E6%9C%AC%E8%AE%BE%E7%BD%AE%E6%88%90%E5%8A%9F%E5%90%8E-%E7%9B%B4%E6%8E%A5%E9%80%89%E6%8B%A9target-comand--b-%E7%BC%96%E8%AF%91%E5%B0%B1ok>4. 脚本设置成功后 直接选择Target “Comand + B” 编译就OK</a></li><li><a href=#5-ps>5. PS:</a></li></ul><hr><h1 id=1-搜索-library-设置工程模式为--static-library>1. 搜索 Library 设置工程模式为 Static Library</h1><p><img src=img/wm_article_iOS_01.png alt></p><hr><h1 id=2-注意事项>2. 注意事项:</h1><ul><li>-Option 目前支持选项</li><li>Source.boundle 即同名资源Bundle文件</li></ul><hr><h1 id=3-run-sripte-内容如下>3. Run Sripte 内容如下</h1><pre tabindex=0><code># 如果工程名称和Framework的Target名称不一样的话，要自定义FMKNAME 例如: FMK_NAME = &#34;MyFramework&#34;
FMK_NAME=${PROJECT_NAME}

# ---Option 打包资源Bundle
FMK_Source_NAME=${PROJECT_NAME}&#34;Source&#34;

# 设置打包导出目录
INSTALL_DIR_SRC=${SRCROOT}/Libs/${FMK_NAME}
INSTALL_DIR=${INSTALL_DIR_SRC}/${FMK_NAME}.framework

# 设置打包源文件空间
WRK_DIR=build
DEVICE_DIR=${WRK_DIR}/Release-iphoneos/${FMK_NAME}.framework
SIMULATOR_DIR=${WRK_DIR}/Release-iphonesimulator/${FMK_NAME}.framework

# Bundle文件目录
FMK_Source_DIR=${WRK_DIR}/Release-iphoneos/${FMK_Source_NAME}.bundle

# xcodebuild 命令相关设置
# Clean and Building both architectures.
xcodebuild -configuration &#34;Release&#34; -target &#34;${FMK_NAME}&#34; -sdk iphoneos clean build
xcodebuild -configuration &#34;Release&#34; -target &#34;${FMK_NAME}&#34; -sdk iphonesimulator clean build

# 使用xcodebuild 打包Bundle
xcodebuild -configuration &#34;Release&#34; -target &#34;${FMK_Source_NAME}&#34; -sdk iphoneos clean build

# 清除并新建INSTALL_DIR目录
if [ -d &#34;${INSTALL_DIR}&#34; ]
then
rm -rf &#34;${INSTALL_DIR}&#34;
fi
mkdir -p &#34;${INSTALL_DIR}&#34;

# 拷贝 .Framework 文件到 INSTALL_DIR目录
cp -R &#34;${DEVICE_DIR}/&#34; &#34;${INSTALL_DIR}/&#34;

# ---Option Bundle拷贝资源文件
cp -R &#34;${FMK_Source_DIR}&#34; &#34;${INSTALL_DIR}/&#34;

# Uses the Lipo Tool to merge both binary files (i386 + armv6/armv7) into one Universal final product.
lipo -create &#34;${DEVICE_DIR}/${FMK_NAME}&#34; &#34;${SIMULATOR_DIR}/${FMK_NAME}&#34; -output &#34;${INSTALL_DIR}/${FMK_NAME}&#34;

ln -s ${INSTALL_DIR}/${FMK_Source_NAME}.bundle ${INSTALL_DIR_SRC}/${FMK_Source_NAME}.bundle

# 清理工程
rm -r &#34;${WRK_DIR}&#34;
rm -r &#34;${INSTALL_DIR}/_CodeSignature&#34;
rm -r &#34;${INSTALL_DIR}/Info.plist&#34;
rm -r &#34;${INSTALL_DIR}/Modules&#34;
# ---Option
rm -r &#34;${INSTALL_DIR}/${FMK_Source_NAME}.bundle/Info.plist&#34;

# 打开打包好的工程目录
open &#34;${INSTALL_DIR_SRC}&#34;
</code></pre><hr><h1 id=4-脚本设置成功后-直接选择target-comand--b-编译就ok>4. 脚本设置成功后 直接选择Target “Comand + B” 编译就OK</h1><p><img src=img/wm_article_iOS_02.png alt></p><hr><h1 id=5-ps>5. PS:</h1><ul><li><p>根据网上资料亲测整理，最终解释权归<a href=http://www.wmyeah.com>WMYeah</a>所有!</p></li><li><p>参考资料:</p><ul><li>1、<a href=http://www.cocoachina.com/ios/20141126/10322.html>Xcode 6制作动态及静态Framework</a></li></ul></li></ul><hr><h4><a href=https://www.wmyeah.com>返回首页</a></h4></div></div><footer class=container><hr class=soften><p><a href=https://gitlab.com/maxlefou/hugo.386>hugo.386 theme by Max le Fou</a> |
&copy;
<a href=http://www.wmyeah.com target=_blank>WMYeah</a>
<span id=thisyear>2023</span>
| Example site
| 构建于 <a href=//gohugo.io target=_blank>Hugo</a></p><p class=text-center></p></footer></body><link rel=stylesheet href=/css/bootstrap.css><link rel=stylesheet href=/css/bootstrap-responsive.css><link rel=stylesheet href=/css/style.css><script src=/js/jquery.js></script>
<script src=/js/bootstrap-386.js></script>
<script src=/js/bootstrap-transition.js></script>
<script src=/js/bootstrap-alert.js></script>
<script src=/js/bootstrap-modal.js></script>
<script src=/js/bootstrap-dropdown.js></script>
<script src=/js/bootstrap-scrollspy.js></script>
<script src=/js/bootstrap-tab.js></script>
<script src=/js/bootstrap-tooltip.js></script>
<script src=/js/bootstrap-popover.js></script>
<script src=/js/bootstrap-button.js></script>
<script src=/js/bootstrap-collapse.js></script>
<script src=/js/bootstrap-carousel.js></script>
<script src=/js/bootstrap-typeahead.js></script>
<script src=/js/bootstrap-affix.js></script>
<script>_386={fastLoad:!0,onePass:!0,speedFactor:.5};function ThisYear(){document.getElementById("thisyear").innerHTML=(new Date).getFullYear()}</script></html>