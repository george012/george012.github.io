<!doctype html><html lang=cn><head><title>WMYeah</title><meta charset=utf-8><meta content="utf-8" http-equiv=encoding><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no"><meta name=theme-color content="#000084"><link rel=icon href=https://www.wmyeah.com/favicon.ico><link rel=canonical href=https://www.wmyeah.com></head><body><nav class="navbar navbar-inverse navbar-fixed-top"><div class=navbar-inner><div class=container><button type=button class="btn btn-navbar" data-toggle=collapse data-target=.nav-collapse></button>
<a class=brand href=https://www.wmyeah.com>WMYeah</a><div class="nav-collapse collapse"><ul class=nav><li><a href=/about/><span>about</span></a></li><li><a href=/posts/><span>posts</span></a></li></ul></div></div></div></nav><div id=content class=container><div class="row-fluid navmargin"><div class=page-header><h1>Jetty9.2 阿里云SSL配置 - Thu, Aug 10, 2017</h1></div><p class=lead></p><p>目录：</p><ul><li><a href=#1-%E7%94%B3%E8%AF%B7%E9%98%BF%E9%87%8C%E4%BA%91%E5%85%8D%E8%B4%B9ssl%E8%AF%81%E4%B9%A6>1. 申请阿里云免费SSL证书</a></li><li><a href=#2-%E8%BD%AC%E6%8D%A2%E8%AF%81%E4%B9%A6>2. 转换证书</a></li><li><a href=#3-%E7%BC%96%E8%BE%91jetty-sslxml%E6%96%87%E4%BB%B6>3. 编辑“jetty-ssl.xml”文件</a></li><li><a href=#4-%E9%85%8D%E7%BD%AEjetty-httpsxml->4. 配置"jetty-https.xml &ldquo;</a></li><li><a href=#5-%E9%85%8D%E7%BD%AEjetty%E5%90%AF%E5%8A%A8%E6%96%87%E4%BB%B6>5. 配置Jetty启动文件</a></li><li><a href=#6-ps>6. PS:</a></li></ul><h1 id=1-申请阿里云免费ssl证书>1. 申请阿里云免费SSL证书</h1><ul><li>阿里云 → 控制台 → 安全（云盾）→ 证书服务 → 购买证书</li><li>根据如下路径申请免费证书（购买详细步骤阿里云操作提示中很详细）</li></ul><h1 id=2-转换证书>2. 转换证书</h1><ul><li>xxxx.pfx : 阿里云提供的SSL PFX格式文件</li><li>your-name.jks ：新文件及命名格式（可根据项目需求自行变换）</li><li>转换命令<pre tabindex=0><code>keytool -importkeystore -srckeystore xxxx.pfx -destkeystore your-name.jks -srcstoretype PKCS12 -deststoretype JKS
</code></pre></li></ul><h1 id=3-编辑jetty-sslxml文件>3. 编辑“jetty-ssl.xml”文件</h1><ul><li><p>以下下操作均在“$JETTY_HOME”目录下操作</p></li><li><pre tabindex=0><code>vim etc/jetty-ssl.xml
</code></pre></li><li><p>如下配置</p><ul><li>etc/your-name.jks : 相对于Jetty根目录的jks证书位置</li><li>your-jks-password : 证书密码</li></ul><pre tabindex=0><code>&lt;Set name=&#34;KeyStorePath&#34;&gt;&lt;Property name=&#34;jetty.base&#34; default=&#34;.&#34; /&gt;/&lt;Property name=&#34;jetty.keystore&#34; default=&#34;etc/your-name.jks&#34;/&gt;&lt;/Set&gt;
&lt;Set name=&#34;KeyStorePassword&#34;&gt;&lt;Property name=&#34;jetty.keystore.password&#34; default=&#34;your-jks-password&#34;/&gt;&lt;/Set&gt;
&lt;Set name=&#34;KeyManagerPassword&#34;&gt;&lt;Property name=&#34;jetty.keymanager.password&#34; default=&#34;your-jks-password&#34;/&gt;&lt;/Set&gt;
&lt;Set name=&#34;TrustStorePath&#34;&gt;&lt;Property name=&#34;jetty.base&#34; default=&#34;.&#34; /&gt;/&lt;Property name=&#34;jetty.truststore&#34; default=&#34;etc/your-name.jks&#34;/&gt;&lt;/Set&gt;
&lt;Set name=&#34;TrustStorePassword&#34;&gt;&lt;Property name=&#34;jetty.truststore.password&#34; default=&#34;your-jks-password&#34;/&gt;&lt;/Set&gt;
</code></pre></li></ul><h1 id=4-配置jetty-httpsxml->4. 配置"jetty-https.xml "</h1><ul><li><p>进入编辑</p><pre tabindex=0><code>vim etc/jetty-https.xml
</code></pre></li><li><p>检查配置</p><ul><li>8443 ：此处以8443位示例端口</li></ul><pre tabindex=0><code>&lt;Set name=&#34;host&#34;&gt;&lt;Property name=&#34;jetty.host&#34; /&gt;&lt;/Set&gt;
&lt;Set name=&#34;port&#34;&gt;&lt;Property name=&#34;https.port&#34; default=&#34;8443&#34; /&gt;&lt;/Set&gt;
&lt;Set name=&#34;idleTimeout&#34;&gt;&lt;Property name=&#34;https.timeout&#34; default=&#34;30000&#34;/&gt;&lt;/Set&gt;
&lt;Set name=&#34;soLingerTime&#34;&gt;&lt;Property name=&#34;https.soLingerTime&#34; default=&#34;-1&#34;/&gt;&lt;/Set&gt;
&lt;Set name=&#34;acceptorPriorityDelta&#34;&gt;&lt;Property name=&#34;ssl.acceptorPriorityDelta&#34; default=&#34;0&#34;/&gt;&lt;/Set&gt;
&lt;Set name=&#34;selectorPriorityDelta&#34;&gt;&lt;Property name=&#34;ssl.selectorPriorityDelta&#34; default=&#34;0&#34;/&gt;&lt;/Set&gt;
&lt;Set name=&#34;acceptQueueSize&#34;&gt;&lt;Property name=&#34;https.acceptQueueSize&#34; default=&#34;0&#34;/&gt;&lt;/Set&gt;
</code></pre></li></ul><h1 id=5-配置jetty启动文件>5. 配置Jetty启动文件</h1><ul><li>编辑“start.ini”<pre tabindex=0><code>vim start.ini
</code></pre></li><li>文件中添加如下代码(尽量在端口配置行上面添加)<pre tabindex=0><code>etc/jetty-ssl.xml
etc/jetty-https.xml
</code></pre></li></ul><h1 id=6-ps>6. PS:</h1><ul><li>根据网上资料亲测整理，最终解释权归<a href=http://www.wmyeah.com>WMYeah</a>所有!</li><li>参考资料:
1、<a href=https://www.eclipse.org/jetty/documentation/9.2.22.v20170531/>Jetty:9.2官方文档：Jetty : The Definitive Reference</a>
2、<a href=https://www.eclipse.org/jetty/documentation/9.2.22.v20170531/configuring-ssl.html>Jetty9.2官方SSL配置文档</a></li></ul><hr><h4><a href=https://www.wmyeah.com>返回首页</a></h4></div></div><footer class=container><hr class=soften><p><a href=https://gitlab.com/maxlefou/hugo.386>hugo.386 theme by Max le Fou</a> |
&copy;
<a href=http://www.wmyeah.com target=_blank>WMYeah</a>
<span id=thisyear>2023</span>
| Example site
| 构建于 <a href=//gohugo.io target=_blank>Hugo</a></p><p class=text-center></p></footer></body><link rel=stylesheet href=/css/bootstrap.css><link rel=stylesheet href=/css/bootstrap-responsive.css><link rel=stylesheet href=/css/style.css><script src=/js/jquery.js></script>
<script src=/js/bootstrap-386.js></script>
<script src=/js/bootstrap-transition.js></script>
<script src=/js/bootstrap-alert.js></script>
<script src=/js/bootstrap-modal.js></script>
<script src=/js/bootstrap-dropdown.js></script>
<script src=/js/bootstrap-scrollspy.js></script>
<script src=/js/bootstrap-tab.js></script>
<script src=/js/bootstrap-tooltip.js></script>
<script src=/js/bootstrap-popover.js></script>
<script src=/js/bootstrap-button.js></script>
<script src=/js/bootstrap-collapse.js></script>
<script src=/js/bootstrap-carousel.js></script>
<script src=/js/bootstrap-typeahead.js></script>
<script src=/js/bootstrap-affix.js></script>
<script>_386={fastLoad:!0,onePass:!0,speedFactor:.5};function ThisYear(){document.getElementById("thisyear").innerHTML=(new Date).getFullYear()}</script></html>