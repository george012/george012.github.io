<!doctype html><html lang=cn><head><title>WMYeah</title><meta charset=utf-8><meta content="utf-8" http-equiv=encoding><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no"><meta name=theme-color content="#000084"><link rel=icon href=https://www.wmyeah.com/favicon.ico><link rel=canonical href=https://www.wmyeah.com></head><body><nav class="navbar navbar-inverse navbar-fixed-top"><div class=navbar-inner><div class=container><button type=button class="btn btn-navbar" data-toggle=collapse data-target=.nav-collapse></button>
<a class=brand href=https://www.wmyeah.com>WMYeah</a><div class="nav-collapse collapse"><ul class=nav><li><a href=/about/><span>about</span></a></li><li><a href=/posts/><span>posts</span></a></li></ul></div></div></div></nav><div id=content class=container><div class="row-fluid navmargin"><div class=page-header><h1>CentOS7.4 zookeeper单机模式安装，并设置开机自启 - Mon, Aug 13, 2018</h1></div><p class=lead></p><p>目录：</p><ul><li><a href=#1-%E6%9B%B4%E6%96%B0yum%E6%BA%90>1. 更新Yum源</a></li><li><a href=#2-%E8%8E%B7%E5%8F%96%E6%9C%80%E6%96%B0%E7%9A%84zookeeper-tar%E5%8C%85>2. 获取最新的zookeeper Tar包</a></li><li><a href=#3-%E5%AE%89%E8%A3%85jdk%E5%AE%98%E7%BD%91%E4%B8%8B%E8%BD%BD-%E6%AD%A4%E5%A4%84%E9%80%89%E6%8B%A9%E7%9A%84%E6%98%AF-rpm%E5%8C%85%E5%AE%89%E8%A3%85>3. 安装JDK（官网下载 此处选择的是 rpm包安装）</a></li><li><a href=#4-%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF>4. 设置开机自启</a></li><li><a href=#5-ps>5. PS:</a></li></ul><hr><h1 id=1-更新yum源>1. 更新Yum源</h1><pre tabindex=0><code>yum update
</code></pre><h1 id=2-获取最新的zookeeper-tar包>2. 获取最新的zookeeper Tar包</h1><pre tabindex=0><code>wget http://mirrors.hust.edu.cn/apache/zookeeper/zookeeper-3.4.13/zookeeper-3.4.13.tar.gz

# 解压
tar -zxvf zookeeper-3.4.13.tar.gz 
</code></pre><h1 id=3-安装jdk官网下载-此处选择的是-rpm包安装>3. 安装JDK（官网下载 此处选择的是 rpm包安装）</h1><ul><li>rpm包主要是为了自动配置环境变量</li></ul><pre tabindex=0><code>rpm -ivh jdk-8u181-linux-x64.rpm 
</code></pre><h1 id=4-设置开机自启>4. 设置开机自启</h1><ul><li>遵循系统的权限管理模式 所以 参照 系统ngix.server 服务编写</li></ul><pre tabindex=0><code>vim /usr/lib/systemd/system/zookeeper.service
</code></pre><ul><li>内容</li></ul><pre tabindex=0><code>[Unit]
Description=zookeeper
After=syslog.target network.target

[Service]
Type=forking
Environment=ZOO_LOG_DIR=/home/zookeeper/log      //这里必须填写绝对路径
ExecStart=/zookeeper安装目录/bin/zkServer.sh start
ExecStop=/zookeeper安装目录/zoo/bin/zkServer.sh stop
Restart=always

[Install]
WantedBy=multi-user.target
</code></pre><ul><li>软连接</li></ul><pre tabindex=0><code>ln -s /usr/lib/systemd/system/zookeeper.service /etc/systemd/system/zookeeper.service
</code></pre><h1 id=5-ps>5. PS:</h1><ul><li>根据网上资料亲测整理，最终解释权归<a href=http://www.wmyeah.com>WMYeah</a>所有!</li><li>参考资料:<ul><li>1、<a href=http://blog.51cto.com/kusorz/1920778>Centos7以普通用户启动zookeeper并加入开机自启动服务</a></li></ul></li></ul><hr><h4><a href=https://www.wmyeah.com>返回首页</a></h4></div></div><footer class=container><hr class=soften><p><a href=https://gitlab.com/maxlefou/hugo.386>hugo.386 theme by Max le Fou</a> |
&copy;
<a href=http://www.wmyeah.com target=_blank>WMYeah</a>
<span id=thisyear>2023</span>
| Example site
| 构建于 <a href=//gohugo.io target=_blank>Hugo</a></p><p class=text-center></p></footer></body><link rel=stylesheet href=/css/bootstrap.css><link rel=stylesheet href=/css/bootstrap-responsive.css><link rel=stylesheet href=/css/style.css><script src=/js/jquery.js></script>
<script src=/js/bootstrap-386.js></script>
<script src=/js/bootstrap-transition.js></script>
<script src=/js/bootstrap-alert.js></script>
<script src=/js/bootstrap-modal.js></script>
<script src=/js/bootstrap-dropdown.js></script>
<script src=/js/bootstrap-scrollspy.js></script>
<script src=/js/bootstrap-tab.js></script>
<script src=/js/bootstrap-tooltip.js></script>
<script src=/js/bootstrap-popover.js></script>
<script src=/js/bootstrap-button.js></script>
<script src=/js/bootstrap-collapse.js></script>
<script src=/js/bootstrap-carousel.js></script>
<script src=/js/bootstrap-typeahead.js></script>
<script src=/js/bootstrap-affix.js></script>
<script>_386={fastLoad:!0,onePass:!0,speedFactor:.5};function ThisYear(){document.getElementById("thisyear").innerHTML=(new Date).getFullYear()}</script></html>