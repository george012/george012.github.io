<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
<link rel="stylesheet" href="/styles/base.css">

    
<link rel="stylesheet" href="/styles/theme.css">

    <link rel="shortcut icon" href="/img/favicon.png">
    
    <title>Jetty9.2 阿里云SSL配置 - WMYeah</title>
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-XXXXXXXXX');
    </script>
    
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="WMYeah" type="application/atom+xml">
</head>
<body>
    <div class="header-title">
        <span class="header-light"></span>
        <span class="header-light"></span>
        <span class="header-light"></span>
        <span>WMYeah www.wmyeah.com<span>
    </div>
    <div class="container">
        <ul class="nav">
        
            <li><a href="/">Main</a></li>
        
            <li><a href="/categories">Categories</a></li>
        
            <li><a href="/tags">Tags</a></li>
        
            <li><a href="/about">About</a></li>
        
        </ul>
        <div class="content">
            <div class="post-container">
    <div class="post-header">
        <span class="ui-tips">标题：</span>
        <h1 class="ui-keyword post-title">Jetty9.2 阿里云SSL配置</h1>
        <span class="post-date">2017-08-10</span>
    </div>
    
    
    <div class="post-header">
        <span class="ui-tips">标签：</span>
        
        <a href="/tags/Linux/">Linux</a>
        
    </div>
    
    
    <div class="post-content"><p><font size=20>目录：</font></p>
<!-- TOC -->

<ul>
<li><a href="#1-%E7%94%B3%E8%AF%B7%E9%98%BF%E9%87%8C%E4%BA%91%E5%85%8D%E8%B4%B9ssl%E8%AF%81%E4%B9%A6">1. 申请阿里云免费SSL证书</a></li>
<li><a href="#2-%E8%BD%AC%E6%8D%A2%E8%AF%81%E4%B9%A6">2. 转换证书</a></li>
<li><a href="#3-%E7%BC%96%E8%BE%91jetty-sslxml%E6%96%87%E4%BB%B6">3. 编辑“jetty-ssl.xml”文件</a></li>
<li><a href="#4-%E9%85%8D%E7%BD%AEjetty-httpsxml-">4. 配置”jetty-https.xml “</a></li>
<li><a href="#5-%E9%85%8D%E7%BD%AEjetty%E5%90%AF%E5%8A%A8%E6%96%87%E4%BB%B6">5. 配置Jetty启动文件</a></li>
<li><a href="#6-ps">6. PS:</a></li>
</ul>
<!-- /TOC -->


<h1 id="1-申请阿里云免费SSL证书"><a href="#1-申请阿里云免费SSL证书" class="headerlink" title="1. 申请阿里云免费SSL证书"></a>1. 申请阿里云免费SSL证书</h1><ul>
<li>   阿里云	→	控制台	→	安全（云盾）→	证书服务	→	购买证书</li>
<li>   根据如下路径申请免费证书（购买详细步骤阿里云操作提示中很详细）</li>
</ul>
<h1 id="2-转换证书"><a href="#2-转换证书" class="headerlink" title="2. 转换证书"></a>2. 转换证书</h1><ul>
<li>xxxx.pfx  : 阿里云提供的SSL PFX格式文件</li>
<li>your-name.jks ：新文件及命名格式（可根据项目需求自行变换）</li>
<li>   转换命令   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -importkeystore -srckeystore xxxx.pfx -destkeystore your-name.jks -srcstoretype PKCS12 -deststoretype JKS</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="3-编辑“jetty-ssl-xml”文件"><a href="#3-编辑“jetty-ssl-xml”文件" class="headerlink" title="3. 编辑“jetty-ssl.xml”文件"></a>3. 编辑“jetty-ssl.xml”文件</h1><ul>
<li><p>   以下下操作均在“$JETTY_HOME”目录下操作</p>
</li>
<li><pre><code>vim etc/jetty-ssl.xml
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*	如下配置</span><br><span class="line">	*	etc/your-name.jks	:	相对于Jetty根目录的jks证书位置</span><br><span class="line">	*	your-jks-password	:	证书密码</span><br></pre></td></tr></table></figure>
&lt;Set name=&quot;KeyStorePath&quot;&gt;&lt;Property name=&quot;jetty.base&quot; default=&quot;.&quot; /&gt;/&lt;Property name=&quot;jetty.keystore&quot; default=&quot;etc/your-name.jks&quot;/&gt;&lt;/Set&gt;
&lt;Set name=&quot;KeyStorePassword&quot;&gt;&lt;Property name=&quot;jetty.keystore.password&quot; default=&quot;your-jks-password&quot;/&gt;&lt;/Set&gt;
&lt;Set name=&quot;KeyManagerPassword&quot;&gt;&lt;Property name=&quot;jetty.keymanager.password&quot; default=&quot;your-jks-password&quot;/&gt;&lt;/Set&gt;
&lt;Set name=&quot;TrustStorePath&quot;&gt;&lt;Property name=&quot;jetty.base&quot; default=&quot;.&quot; /&gt;/&lt;Property name=&quot;jetty.truststore&quot; default=&quot;etc/your-name.jks&quot;/&gt;&lt;/Set&gt;
&lt;Set name=&quot;TrustStorePassword&quot;&gt;&lt;Property name=&quot;jetty.truststore.password&quot; default=&quot;your-jks-password&quot;/&gt;&lt;/Set&gt;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 4. 配置&quot;jetty-https.xml &quot;</span><br><span class="line">*	进入编辑</span><br></pre></td></tr></table></figure>
vim etc/jetty-https.xml
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*	检查配置</span><br><span class="line">	*	8443	：此处以8443位示例端口</span><br></pre></td></tr></table></figure>
&lt;Set name=&quot;host&quot;&gt;&lt;Property name=&quot;jetty.host&quot; /&gt;&lt;/Set&gt;
&lt;Set name=&quot;port&quot;&gt;&lt;Property name=&quot;https.port&quot; default=&quot;8443&quot; /&gt;&lt;/Set&gt;
&lt;Set name=&quot;idleTimeout&quot;&gt;&lt;Property name=&quot;https.timeout&quot; default=&quot;30000&quot;/&gt;&lt;/Set&gt;
&lt;Set name=&quot;soLingerTime&quot;&gt;&lt;Property name=&quot;https.soLingerTime&quot; default=&quot;-1&quot;/&gt;&lt;/Set&gt;
&lt;Set name=&quot;acceptorPriorityDelta&quot;&gt;&lt;Property name=&quot;ssl.acceptorPriorityDelta&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;
&lt;Set name=&quot;selectorPriorityDelta&quot;&gt;&lt;Property name=&quot;ssl.selectorPriorityDelta&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;
&lt;Set name=&quot;acceptQueueSize&quot;&gt;&lt;Property name=&quot;https.acceptQueueSize&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 5. 配置Jetty启动文件</span><br><span class="line">*	编辑“start.ini”</span><br></pre></td></tr></table></figure>
vim start.ini
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*	文件中添加如下代码(&lt;font color = red&gt;尽量在端口配置行上面添加&lt;/font&gt;)</span><br></pre></td></tr></table></figure>
etc/jetty-ssl.xml
etc/jetty-https.xml
</code></pre>
</li>
</ul>
<h1 id="6-PS"><a href="#6-PS" class="headerlink" title="6. PS:"></a>6. PS:</h1><ul>
<li>根据网上资料亲测整理，最终解释权归<a href="http://www.wmyeah.com/">WMYeah</a>所有!</li>
<li>参考资料:<br>  1、<a target="_blank" rel="noopener" href="https://www.eclipse.org/jetty/documentation/9.2.22.v20170531/">Jetty:9.2官方文档：Jetty : The Definitive Reference</a><br>  2、<a target="_blank" rel="noopener" href="https://www.eclipse.org/jetty/documentation/9.2.22.v20170531/configuring-ssl.html">Jetty9.2官方SSL配置文档</a></li>
</ul>
<hr>
</div>
</div>

        </div>
        <div class="footer">
            
            <p class="footer-links">
            
                <a target="_blank" href="https://www.wmyeah.com">&copy; WMYeah</a>
            
            </p>
            
            <p class="footer-copyright">
                <span>Powered by <a target="_blank" href="https://hexo.io">Hexo</a></span>
                <span>Theme <a target="_blank" href="https://github.com/tinkink-co/hexo-theme-terminal">Terminal</a></span>
            </p>
        </div>
    </div>
</body>
</html>
